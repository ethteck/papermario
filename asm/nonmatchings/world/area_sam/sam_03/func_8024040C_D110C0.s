.set noat      # allow manual use of $at
.set noreorder # don't insert nops after branches

glabel func_8024040C_D114CC
/* D114CC 8024040C 27BDFFD0 */  addiu     $sp, $sp, -0x30
/* D114D0 80240410 AFB40028 */  sw        $s4, 0x28($sp)
/* D114D4 80240414 0080A02D */  daddu     $s4, $a0, $zero
/* D114D8 80240418 AFBF002C */  sw        $ra, 0x2c($sp)
/* D114DC 8024041C AFB30024 */  sw        $s3, 0x24($sp)
/* D114E0 80240420 AFB20020 */  sw        $s2, 0x20($sp)
/* D114E4 80240424 AFB1001C */  sw        $s1, 0x1c($sp)
/* D114E8 80240428 AFB00018 */  sw        $s0, 0x18($sp)
/* D114EC 8024042C 8E910148 */  lw        $s1, 0x148($s4)
/* D114F0 80240430 86240008 */  lh        $a0, 8($s1)
/* D114F4 80240434 0C00EABB */  jal       get_npc_unsafe
/* D114F8 80240438 00A0802D */   daddu    $s0, $a1, $zero
/* D114FC 8024043C 16000005 */  bnez      $s0, .L80240454
/* D11500 80240440 0040902D */   daddu    $s2, $v0, $zero
/* D11504 80240444 8E2200B0 */  lw        $v0, 0xb0($s1)
/* D11508 80240448 30420004 */  andi      $v0, $v0, 4
/* D1150C 8024044C 10400015 */  beqz      $v0, .L802404A4
/* D11510 80240450 00000000 */   nop      
.L80240454:
/* D11514 80240454 AE800070 */  sw        $zero, 0x70($s4)
/* D11518 80240458 8E420000 */  lw        $v0, ($s2)
/* D1151C 8024045C 3C031F30 */  lui       $v1, 0x1f30
/* D11520 80240460 A640008E */  sh        $zero, 0x8e($s2)
/* D11524 80240464 34420102 */  ori       $v0, $v0, 0x102
/* D11528 80240468 AE420000 */  sw        $v0, ($s2)
/* D1152C 8024046C 8E220000 */  lw        $v0, ($s1)
/* D11530 80240470 3C01C47A */  lui       $at, 0xc47a
/* D11534 80240474 44810000 */  mtc1      $at, $f0
/* D11538 80240478 00431025 */  or        $v0, $v0, $v1
/* D1153C 8024047C AE220000 */  sw        $v0, ($s1)
/* D11540 80240480 AE400038 */  sw        $zero, 0x38($s2)
/* D11544 80240484 E640003C */  swc1      $f0, 0x3c($s2)
/* D11548 80240488 AE400040 */  sw        $zero, 0x40($s2)
/* D1154C 8024048C 8E2300B0 */  lw        $v1, 0xb0($s1)
/* D11550 80240490 30620004 */  andi      $v0, $v1, 4
/* D11554 80240494 10400003 */  beqz      $v0, .L802404A4
/* D11558 80240498 2402FFFB */   addiu    $v0, $zero, -5
/* D1155C 8024049C 00621024 */  and       $v0, $v1, $v0
/* D11560 802404A0 AE2200B0 */  sw        $v0, 0xb0($s1)
.L802404A4:
/* D11564 802404A4 8E930070 */  lw        $s3, 0x70($s4)
/* D11568 802404A8 12600005 */  beqz      $s3, .L802404C0
/* D1156C 802404AC 24020001 */   addiu    $v0, $zero, 1
/* D11570 802404B0 12620048 */  beq       $s3, $v0, .L802405D4
/* D11574 802404B4 00000000 */   nop      
/* D11578 802404B8 08090192 */  j         .L80240648
/* D1157C 802404BC 00000000 */   nop      
.L802404C0:
/* D11580 802404C0 86240008 */  lh        $a0, 8($s1)
/* D11584 802404C4 0C00FB3A */  jal       get_enemy
/* D11588 802404C8 2484FFFF */   addiu    $a0, $a0, -1
/* D1158C 802404CC 0040802D */  daddu     $s0, $v0, $zero
/* D11590 802404D0 0C00EABB */  jal       get_npc_unsafe
/* D11594 802404D4 86040008 */   lh       $a0, 8($s0)
/* D11598 802404D8 24030001 */  addiu     $v1, $zero, 1
/* D1159C 802404DC 0040982D */  daddu     $s3, $v0, $zero
/* D115A0 802404E0 A2230007 */  sb        $v1, 7($s1)
/* D115A4 802404E4 8E03006C */  lw        $v1, 0x6c($s0)
/* D115A8 802404E8 24020003 */  addiu     $v0, $zero, 3
/* D115AC 802404EC 14620056 */  bne       $v1, $v0, .L80240648
/* D115B0 802404F0 00000000 */   nop      
/* D115B4 802404F4 8E2500A8 */  lw        $a1, 0xa8($s1)
/* D115B8 802404F8 10A00003 */  beqz      $a1, .L80240508
/* D115BC 802404FC 0260202D */   daddu    $a0, $s3, $zero
/* D115C0 80240500 0C012530 */  jal       func_800494C0
/* D115C4 80240504 0000302D */   daddu    $a2, $zero, $zero
.L80240508:
/* D115C8 80240508 27A40010 */  addiu     $a0, $sp, 0x10
/* D115CC 8024050C C6280070 */  lwc1      $f8, 0x70($s1)
/* D115D0 80240510 46804220 */  cvt.s.w   $f8, $f8
/* D115D4 80240514 C6620034 */  lwc1      $f2, 0x34($s3)
/* D115D8 80240518 3C014387 */  lui       $at, 0x4387
/* D115DC 8024051C 44810000 */  mtc1      $at, $f0
/* D115E0 80240520 44064000 */  mfc1      $a2, $f8
/* D115E4 80240524 46020001 */  sub.s     $f0, $f0, $f2
/* D115E8 80240528 C6660038 */  lwc1      $f6, 0x38($s3)
/* D115EC 8024052C C6640040 */  lwc1      $f4, 0x40($s3)
/* D115F0 80240530 44070000 */  mfc1      $a3, $f0
/* D115F4 80240534 27A50014 */  addiu     $a1, $sp, 0x14
/* D115F8 80240538 E7A60010 */  swc1      $f6, 0x10($sp)
/* D115FC 8024053C 0C00A7E7 */  jal       add_vec2D_polar
/* D11600 80240540 E7A40014 */   swc1     $f4, 0x14($sp)
/* D11604 80240544 C7A00010 */  lwc1      $f0, 0x10($sp)
/* D11608 80240548 4600020D */  trunc.w.s $f8, $f0
/* D1160C 8024054C 44024000 */  mfc1      $v0, $f8
/* D11610 80240550 E6400038 */  swc1      $f0, 0x38($s2)
/* D11614 80240554 A6220010 */  sh        $v0, 0x10($s1)
/* D11618 80240558 C660003C */  lwc1      $f0, 0x3c($s3)
/* D1161C 8024055C C622006C */  lwc1      $f2, 0x6c($s1)
/* D11620 80240560 468010A0 */  cvt.s.w   $f2, $f2
/* D11624 80240564 46020000 */  add.s     $f0, $f0, $f2
/* D11628 80240568 3C03800F */  lui       $v1, %hi(gPlayerStatusPtr)
/* D1162C 8024056C 8C637B30 */  lw        $v1, %lo(gPlayerStatusPtr)($v1)
/* D11630 80240570 E640003C */  swc1      $f0, 0x3c($s2)
/* D11634 80240574 C7A20014 */  lwc1      $f2, 0x14($sp)
/* D11638 80240578 4600020D */  trunc.w.s $f8, $f0
/* D1163C 8024057C 44024000 */  mfc1      $v0, $f8
/* D11640 80240580 00000000 */  nop       
/* D11644 80240584 A6220012 */  sh        $v0, 0x12($s1)
/* D11648 80240588 4600120D */  trunc.w.s $f8, $f2
/* D1164C 8024058C 44024000 */  mfc1      $v0, $f8
/* D11650 80240590 E6420040 */  swc1      $f2, 0x40($s2)
/* D11654 80240594 A6220014 */  sh        $v0, 0x14($s1)
/* D11658 80240598 8C660028 */  lw        $a2, 0x28($v1)
/* D1165C 8024059C 8C670030 */  lw        $a3, 0x30($v1)
/* D11660 802405A0 C64C0038 */  lwc1      $f12, 0x38($s2)
/* D11664 802405A4 0C00A720 */  jal       atan2
/* D11668 802405A8 C64E0040 */   lwc1     $f14, 0x40($s2)
/* D1166C 802405AC 3C03E0EF */  lui       $v1, 0xe0ef
/* D11670 802405B0 E640000C */  swc1      $f0, 0xc($s2)
/* D11674 802405B4 8E220000 */  lw        $v0, ($s1)
/* D11678 802405B8 3463FFFF */  ori       $v1, $v1, 0xffff
/* D1167C 802405BC 00431024 */  and       $v0, $v0, $v1
/* D11680 802405C0 AE220000 */  sw        $v0, ($s1)
/* D11684 802405C4 24020001 */  addiu     $v0, $zero, 1
/* D11688 802405C8 A640008E */  sh        $zero, 0x8e($s2)
/* D1168C 802405CC 08090192 */  j         .L80240648
/* D11690 802405D0 AE820070 */   sw       $v0, 0x70($s4)
.L802405D4:
/* D11694 802405D4 86240008 */  lh        $a0, 8($s1)
/* D11698 802405D8 0C00FB3A */  jal       get_enemy
/* D1169C 802405DC 2484FFFF */   addiu    $a0, $a0, -1
/* D116A0 802405E0 0040802D */  daddu     $s0, $v0, $zero
/* D116A4 802405E4 0C00EABB */  jal       get_npc_unsafe
/* D116A8 802405E8 86040008 */   lh       $a0, 8($s0)
/* D116AC 802405EC 9642008E */  lhu       $v0, 0x8e($s2)
/* D116B0 802405F0 24420001 */  addiu     $v0, $v0, 1
/* D116B4 802405F4 A642008E */  sh        $v0, 0x8e($s2)
/* D116B8 802405F8 00021400 */  sll       $v0, $v0, 0x10
/* D116BC 802405FC 8E23007C */  lw        $v1, 0x7c($s1)
/* D116C0 80240600 00021403 */  sra       $v0, $v0, 0x10
/* D116C4 80240604 0043102A */  slt       $v0, $v0, $v1
/* D116C8 80240608 50400001 */  beql      $v0, $zero, .L80240610
/* D116CC 8024060C A2200007 */   sb       $zero, 7($s1)
.L80240610:
/* D116D0 80240610 8E03006C */  lw        $v1, 0x6c($s0)
/* D116D4 80240614 24020004 */  addiu     $v0, $zero, 4
/* D116D8 80240618 1462000B */  bne       $v1, $v0, .L80240648
/* D116DC 8024061C 3C021F10 */   lui      $v0, 0x1f10
/* D116E0 80240620 8E230000 */  lw        $v1, ($s1)
/* D116E4 80240624 3C01C47A */  lui       $at, 0xc47a
/* D116E8 80240628 44810000 */  mtc1      $at, $f0
/* D116EC 8024062C 00621825 */  or        $v1, $v1, $v0
/* D116F0 80240630 AE230000 */  sw        $v1, ($s1)
/* D116F4 80240634 AE400038 */  sw        $zero, 0x38($s2)
/* D116F8 80240638 E640003C */  swc1      $f0, 0x3c($s2)
/* D116FC 8024063C AE400040 */  sw        $zero, 0x40($s2)
/* D11700 80240640 A2330007 */  sb        $s3, 7($s1)
/* D11704 80240644 AE800070 */  sw        $zero, 0x70($s4)
.L80240648:
/* D11708 80240648 8FBF002C */  lw        $ra, 0x2c($sp)
/* D1170C 8024064C 8FB40028 */  lw        $s4, 0x28($sp)
/* D11710 80240650 8FB30024 */  lw        $s3, 0x24($sp)
/* D11714 80240654 8FB20020 */  lw        $s2, 0x20($sp)
/* D11718 80240658 8FB1001C */  lw        $s1, 0x1c($sp)
/* D1171C 8024065C 8FB00018 */  lw        $s0, 0x18($sp)
/* D11720 80240660 0000102D */  daddu     $v0, $zero, $zero
/* D11724 80240664 03E00008 */  jr        $ra
/* D11728 80240668 27BD0030 */   addiu    $sp, $sp, 0x30
