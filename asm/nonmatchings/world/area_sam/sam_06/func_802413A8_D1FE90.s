.set noat      # allow manual use of $at
.set noreorder # don't insert nops after branches

glabel func_802413A8_D21238
/* D21238 802413A8 27BDFFB0 */  addiu     $sp, $sp, -0x50
/* D2123C 802413AC AFB20030 */  sw        $s2, 0x30($sp)
/* D21240 802413B0 0080902D */  daddu     $s2, $a0, $zero
/* D21244 802413B4 AFBF0038 */  sw        $ra, 0x38($sp)
/* D21248 802413B8 AFB30034 */  sw        $s3, 0x34($sp)
/* D2124C 802413BC AFB1002C */  sw        $s1, 0x2c($sp)
/* D21250 802413C0 AFB00028 */  sw        $s0, 0x28($sp)
/* D21254 802413C4 F7B60048 */  sdc1      $f22, 0x48($sp)
/* D21258 802413C8 F7B40040 */  sdc1      $f20, 0x40($sp)
/* D2125C 802413CC 8E510148 */  lw        $s1, 0x148($s2)
/* D21260 802413D0 86240008 */  lh        $a0, 8($s1)
/* D21264 802413D4 0C00EABB */  jal       get_npc_unsafe
/* D21268 802413D8 00A0982D */   daddu    $s3, $a1, $zero
/* D2126C 802413DC 0040802D */  daddu     $s0, $v0, $zero
/* D21270 802413E0 0200202D */  daddu     $a0, $s0, $zero
/* D21274 802413E4 C6220088 */  lwc1      $f2, 0x88($s1)
/* D21278 802413E8 468010A0 */  cvt.s.w   $f2, $f2
/* D2127C 802413EC 460010A1 */  cvt.d.s   $f2, $f2
/* D21280 802413F0 C604001C */  lwc1      $f4, 0x1c($s0)
/* D21284 802413F4 C6000014 */  lwc1      $f0, 0x14($s0)
/* D21288 802413F8 8E050018 */  lw        $a1, 0x18($s0)
/* D2128C 802413FC 46002100 */  add.s     $f4, $f4, $f0
/* D21290 80241400 8E06000C */  lw        $a2, 0xc($s0)
/* D21294 80241404 C6200078 */  lwc1      $f0, 0x78($s1)
/* D21298 80241408 46800020 */  cvt.s.w   $f0, $f0
/* D2129C 8024140C E604001C */  swc1      $f4, 0x1c($s0)
/* D212A0 80241410 3C014059 */  lui       $at, 0x4059
/* D212A4 80241414 44812800 */  mtc1      $at, $f5
/* D212A8 80241418 44802000 */  mtc1      $zero, $f4
/* D212AC 8024141C 46000021 */  cvt.d.s   $f0, $f0
/* D212B0 80241420 46240003 */  div.d     $f0, $f0, $f4
/* D212B4 80241424 46200520 */  cvt.s.d   $f20, $f0
/* D212B8 80241428 46241083 */  div.d     $f2, $f2, $f4
/* D212BC 8024142C 0C00EA95 */  jal       npc_move_heading
/* D212C0 80241430 462015A0 */   cvt.s.d  $f22, $f2
/* D212C4 80241434 C604001C */  lwc1      $f4, 0x1c($s0)
/* D212C8 80241438 44801000 */  mtc1      $zero, $f2
/* D212CC 8024143C 44801800 */  mtc1      $zero, $f3
/* D212D0 80241440 46002021 */  cvt.d.s   $f0, $f4
/* D212D4 80241444 4620103E */  c.le.d    $f2, $f0
/* D212D8 80241448 00000000 */  nop       
/* D212DC 8024144C 45000030 */  bc1f      .L80241510
/* D212E0 80241450 00000000 */   nop      
/* D212E4 80241454 C600003C */  lwc1      $f0, 0x3c($s0)
/* D212E8 80241458 46040000 */  add.s     $f0, $f0, $f4
/* D212EC 8024145C E600003C */  swc1      $f0, 0x3c($s0)
/* D212F0 80241460 8E2200CC */  lw        $v0, 0xcc($s1)
/* D212F4 80241464 8C420024 */  lw        $v0, 0x24($v0)
/* D212F8 80241468 AE020028 */  sw        $v0, 0x28($s0)
/* D212FC 8024146C A2200007 */  sb        $zero, 7($s1)
/* D21300 80241470 8E020000 */  lw        $v0, ($s0)
/* D21304 80241474 30420008 */  andi      $v0, $v0, 8
/* D21308 80241478 14400011 */  bnez      $v0, .L802414C0
/* D2130C 8024147C 0000102D */   daddu    $v0, $zero, $zero
/* D21310 80241480 27A50018 */  addiu     $a1, $sp, 0x18
/* D21314 80241484 27A6001C */  addiu     $a2, $sp, 0x1c
/* D21318 80241488 C6000038 */  lwc1      $f0, 0x38($s0)
/* D2131C 8024148C C602003C */  lwc1      $f2, 0x3c($s0)
/* D21320 80241490 C6040040 */  lwc1      $f4, 0x40($s0)
/* D21324 80241494 3C01447A */  lui       $at, 0x447a
/* D21328 80241498 44813000 */  mtc1      $at, $f6
/* D2132C 8024149C 27A20024 */  addiu     $v0, $sp, 0x24
/* D21330 802414A0 E7A00018 */  swc1      $f0, 0x18($sp)
/* D21334 802414A4 E7A2001C */  swc1      $f2, 0x1c($sp)
/* D21338 802414A8 E7A40020 */  swc1      $f4, 0x20($sp)
/* D2133C 802414AC E7A60024 */  swc1      $f6, 0x24($sp)
/* D21340 802414B0 AFA20010 */  sw        $v0, 0x10($sp)
/* D21344 802414B4 8E040080 */  lw        $a0, 0x80($s0)
/* D21348 802414B8 0C0372DF */  jal       func_800DCB7C
/* D2134C 802414BC 27A70020 */   addiu    $a3, $sp, 0x20
.L802414C0:
/* D21350 802414C0 1040000B */  beqz      $v0, .L802414F0
/* D21354 802414C4 00000000 */   nop      
/* D21358 802414C8 C7A0001C */  lwc1      $f0, 0x1c($sp)
/* D2135C 802414CC 46140080 */  add.s     $f2, $f0, $f20
/* D21360 802414D0 C600003C */  lwc1      $f0, 0x3c($s0)
/* D21364 802414D4 4600103E */  c.le.s    $f2, $f0
/* D21368 802414D8 00000000 */  nop       
/* D2136C 802414DC 4500008D */  bc1f      .L80241714
/* D21370 802414E0 00000000 */   nop      
/* D21374 802414E4 E602003C */  swc1      $f2, 0x3c($s0)
/* D21378 802414E8 080905C5 */  j         .L80241714
/* D2137C 802414EC AE400070 */   sw       $zero, 0x70($s2)
.L802414F0:
/* D21380 802414F0 C602003C */  lwc1      $f2, 0x3c($s0)
/* D21384 802414F4 C6000064 */  lwc1      $f0, 0x64($s0)
/* D21388 802414F8 4602003E */  c.le.s    $f0, $f2
/* D2138C 802414FC 00000000 */  nop       
/* D21390 80241500 45030084 */  bc1tl     .L80241714
/* D21394 80241504 AE400070 */   sw       $zero, 0x70($s2)
/* D21398 80241508 080905C5 */  j         .L80241714
/* D2139C 8024150C 00000000 */   nop      
.L80241510:
/* D213A0 80241510 4622003C */  c.lt.d    $f0, $f2
/* D213A4 80241514 00000000 */  nop       
/* D213A8 80241518 4500007E */  bc1f      .L80241714
/* D213AC 8024151C 00000000 */   nop      
/* D213B0 80241520 9602008E */  lhu       $v0, 0x8e($s0)
/* D213B4 80241524 24420001 */  addiu     $v0, $v0, 1
/* D213B8 80241528 A602008E */  sh        $v0, 0x8e($s0)
/* D213BC 8024152C 00021400 */  sll       $v0, $v0, 0x10
/* D213C0 80241530 8E630020 */  lw        $v1, 0x20($s3)
/* D213C4 80241534 00021403 */  sra       $v0, $v0, 0x10
/* D213C8 80241538 0043102A */  slt       $v0, $v0, $v1
/* D213CC 8024153C 14400026 */  bnez      $v0, .L802415D8
/* D213D0 80241540 00000000 */   nop      
/* D213D4 80241544 C60C0038 */  lwc1      $f12, 0x38($s0)
/* D213D8 80241548 C60E0040 */  lwc1      $f14, 0x40($s0)
/* D213DC 8024154C 3C02800F */  lui       $v0, %hi(gPlayerStatusPtr)
/* D213E0 80241550 8C427B30 */  lw        $v0, %lo(gPlayerStatusPtr)($v0)
/* D213E4 80241554 A600008E */  sh        $zero, 0x8e($s0)
/* D213E8 80241558 8C460028 */  lw        $a2, 0x28($v0)
/* D213EC 8024155C 0C00A720 */  jal       atan2
/* D213F0 80241560 8C470030 */   lw       $a3, 0x30($v0)
/* D213F4 80241564 46000506 */  mov.s     $f20, $f0
/* D213F8 80241568 C60C000C */  lwc1      $f12, 0xc($s0)
/* D213FC 8024156C 0C00A70A */  jal       get_clamped_angle_diff
/* D21400 80241570 4600A386 */   mov.s    $f14, $f20
/* D21404 80241574 46000086 */  mov.s     $f2, $f0
/* D21408 80241578 8E62001C */  lw        $v0, 0x1c($s3)
/* D2140C 8024157C 46001005 */  abs.s     $f0, $f2
/* D21410 80241580 44822000 */  mtc1      $v0, $f4
/* D21414 80241584 00000000 */  nop       
/* D21418 80241588 46802120 */  cvt.s.w   $f4, $f4
/* D2141C 8024158C 4600203C */  c.lt.s    $f4, $f0
/* D21420 80241590 00000000 */  nop       
/* D21424 80241594 4500000D */  bc1f      .L802415CC
/* D21428 80241598 00000000 */   nop      
/* D2142C 8024159C 44800000 */  mtc1      $zero, $f0
/* D21430 802415A0 C614000C */  lwc1      $f20, 0xc($s0)
/* D21434 802415A4 4600103C */  c.lt.s    $f2, $f0
/* D21438 802415A8 00000000 */  nop       
/* D2143C 802415AC 45000006 */  bc1f      .L802415C8
/* D21440 802415B0 00021023 */   negu     $v0, $v0
/* D21444 802415B4 44820000 */  mtc1      $v0, $f0
/* D21448 802415B8 00000000 */  nop       
/* D2144C 802415BC 46800020 */  cvt.s.w   $f0, $f0
/* D21450 802415C0 08090573 */  j         .L802415CC
/* D21454 802415C4 4600A500 */   add.s    $f20, $f20, $f0
.L802415C8:
/* D21458 802415C8 4604A500 */  add.s     $f20, $f20, $f4
.L802415CC:
/* D2145C 802415CC 0C00A6C9 */  jal       clamp_angle
/* D21460 802415D0 4600A306 */   mov.s    $f12, $f20
/* D21464 802415D4 E600000C */  swc1      $f0, 0xc($s0)
.L802415D8:
/* D21468 802415D8 8E020000 */  lw        $v0, ($s0)
/* D2146C 802415DC 30420008 */  andi      $v0, $v0, 8
/* D21470 802415E0 1040000A */  beqz      $v0, .L8024160C
/* D21474 802415E4 27A50018 */   addiu    $a1, $sp, 0x18
/* D21478 802415E8 C602003C */  lwc1      $f2, 0x3c($s0)
/* D2147C 802415EC C600001C */  lwc1      $f0, 0x1c($s0)
/* D21480 802415F0 46001080 */  add.s     $f2, $f2, $f0
/* D21484 802415F4 4616103C */  c.lt.s    $f2, $f22
/* D21488 802415F8 00000000 */  nop       
/* D2148C 802415FC 45020045 */  bc1fl     .L80241714
/* D21490 80241600 E602003C */   swc1     $f2, 0x3c($s0)
/* D21494 80241604 080905C4 */  j         .L80241710
/* D21498 80241608 E616003C */   swc1     $f22, 0x3c($s0)
.L8024160C:
/* D2149C 8024160C C6000038 */  lwc1      $f0, 0x38($s0)
/* D214A0 80241610 27A6001C */  addiu     $a2, $sp, 0x1c
/* D214A4 80241614 E7A00018 */  swc1      $f0, 0x18($sp)
/* D214A8 80241618 860200A8 */  lh        $v0, 0xa8($s0)
/* D214AC 8024161C C600001C */  lwc1      $f0, 0x1c($s0)
/* D214B0 80241620 C604003C */  lwc1      $f4, 0x3c($s0)
/* D214B4 80241624 44821000 */  mtc1      $v0, $f2
/* D214B8 80241628 00000000 */  nop       
/* D214BC 8024162C 468010A0 */  cvt.s.w   $f2, $f2
/* D214C0 80241630 46000005 */  abs.s     $f0, $f0
/* D214C4 80241634 46020000 */  add.s     $f0, $f0, $f2
/* D214C8 80241638 C6060040 */  lwc1      $f6, 0x40($s0)
/* D214CC 8024163C 27A20024 */  addiu     $v0, $sp, 0x24
/* D214D0 80241640 46022100 */  add.s     $f4, $f4, $f2
/* D214D4 80241644 3C014024 */  lui       $at, 0x4024
/* D214D8 80241648 44811800 */  mtc1      $at, $f3
/* D214DC 8024164C 44801000 */  mtc1      $zero, $f2
/* D214E0 80241650 46000021 */  cvt.d.s   $f0, $f0
/* D214E4 80241654 46220000 */  add.d     $f0, $f0, $f2
/* D214E8 80241658 E7A60020 */  swc1      $f6, 0x20($sp)
/* D214EC 8024165C E7A4001C */  swc1      $f4, 0x1c($sp)
/* D214F0 80241660 46200020 */  cvt.s.d   $f0, $f0
/* D214F4 80241664 E7A00024 */  swc1      $f0, 0x24($sp)
/* D214F8 80241668 AFA20010 */  sw        $v0, 0x10($sp)
/* D214FC 8024166C 8E040080 */  lw        $a0, 0x80($s0)
/* D21500 80241670 0C0372DF */  jal       func_800DCB7C
/* D21504 80241674 27A70020 */   addiu    $a3, $sp, 0x20
/* D21508 80241678 10400015 */  beqz      $v0, .L802416D0
/* D2150C 8024167C 00000000 */   nop      
/* D21510 80241680 860200A8 */  lh        $v0, 0xa8($s0)
/* D21514 80241684 C604001C */  lwc1      $f4, 0x1c($s0)
/* D21518 80241688 44820000 */  mtc1      $v0, $f0
/* D2151C 8024168C 00000000 */  nop       
/* D21520 80241690 46800020 */  cvt.s.w   $f0, $f0
/* D21524 80241694 46002085 */  abs.s     $f2, $f4
/* D21528 80241698 46020000 */  add.s     $f0, $f0, $f2
/* D2152C 8024169C C7A20024 */  lwc1      $f2, 0x24($sp)
/* D21530 802416A0 4600103E */  c.le.s    $f2, $f0
/* D21534 802416A4 00000000 */  nop       
/* D21538 802416A8 45000005 */  bc1f      .L802416C0
/* D2153C 802416AC 00000000 */   nop      
/* D21540 802416B0 C7A0001C */  lwc1      $f0, 0x1c($sp)
/* D21544 802416B4 AE00001C */  sw        $zero, 0x1c($s0)
/* D21548 802416B8 080905C5 */  j         .L80241714
/* D2154C 802416BC E600003C */   swc1     $f0, 0x3c($s0)
.L802416C0:
/* D21550 802416C0 C600003C */  lwc1      $f0, 0x3c($s0)
/* D21554 802416C4 46040000 */  add.s     $f0, $f0, $f4
/* D21558 802416C8 080905C5 */  j         .L80241714
/* D2155C 802416CC E600003C */   swc1     $f0, 0x3c($s0)
.L802416D0:
/* D21560 802416D0 C606003C */  lwc1      $f6, 0x3c($s0)
/* D21564 802416D4 860200A8 */  lh        $v0, 0xa8($s0)
/* D21568 802416D8 46163081 */  sub.s     $f2, $f6, $f22
/* D2156C 802416DC 44820000 */  mtc1      $v0, $f0
/* D21570 802416E0 00000000 */  nop       
/* D21574 802416E4 46800020 */  cvt.s.w   $f0, $f0
/* D21578 802416E8 46001080 */  add.s     $f2, $f2, $f0
/* D2157C 802416EC C604001C */  lwc1      $f4, 0x1c($s0)
/* D21580 802416F0 46002005 */  abs.s     $f0, $f4
/* D21584 802416F4 4602003C */  c.lt.s    $f0, $f2
/* D21588 802416F8 00000000 */  nop       
/* D2158C 802416FC 45020005 */  bc1fl     .L80241714
/* D21590 80241700 AE00001C */   sw       $zero, 0x1c($s0)
/* D21594 80241704 46043000 */  add.s     $f0, $f6, $f4
/* D21598 80241708 080905C5 */  j         .L80241714
/* D2159C 8024170C E600003C */   swc1     $f0, 0x3c($s0)
.L80241710:
/* D215A0 80241710 AE00001C */  sw        $zero, 0x1c($s0)
.L80241714:
/* D215A4 80241714 8FBF0038 */  lw        $ra, 0x38($sp)
/* D215A8 80241718 8FB30034 */  lw        $s3, 0x34($sp)
/* D215AC 8024171C 8FB20030 */  lw        $s2, 0x30($sp)
/* D215B0 80241720 8FB1002C */  lw        $s1, 0x2c($sp)
/* D215B4 80241724 8FB00028 */  lw        $s0, 0x28($sp)
/* D215B8 80241728 D7B60048 */  ldc1      $f22, 0x48($sp)
/* D215BC 8024172C D7B40040 */  ldc1      $f20, 0x40($sp)
/* D215C0 80241730 03E00008 */  jr        $ra
/* D215C4 80241734 27BD0050 */   addiu    $sp, $sp, 0x50
