.set noat      # allow manual use of $at
.set noreorder # don't insert nops after branches

glabel func_802417EC
/* A0402C 802417EC 27BDFFB0 */  addiu     $sp, $sp, -0x50
/* A04030 802417F0 AFB20030 */  sw        $s2, 0x30($sp)
/* A04034 802417F4 0080902D */  daddu     $s2, $a0, $zero
/* A04038 802417F8 AFBF0038 */  sw        $ra, 0x38($sp)
/* A0403C 802417FC AFB30034 */  sw        $s3, 0x34($sp)
/* A04040 80241800 AFB1002C */  sw        $s1, 0x2c($sp)
/* A04044 80241804 AFB00028 */  sw        $s0, 0x28($sp)
/* A04048 80241808 F7B60048 */  sdc1      $f22, 0x48($sp)
/* A0404C 8024180C F7B40040 */  sdc1      $f20, 0x40($sp)
/* A04050 80241810 8E510148 */  lw        $s1, 0x148($s2)
/* A04054 80241814 86240008 */  lh        $a0, 8($s1)
/* A04058 80241818 0C00EABB */  jal       get_npc_unsafe
/* A0405C 8024181C 00A0982D */   daddu    $s3, $a1, $zero
/* A04060 80241820 0040802D */  daddu     $s0, $v0, $zero
/* A04064 80241824 0200202D */  daddu     $a0, $s0, $zero
/* A04068 80241828 C6220088 */  lwc1      $f2, 0x88($s1)
/* A0406C 8024182C 468010A0 */  cvt.s.w   $f2, $f2
/* A04070 80241830 460010A1 */  cvt.d.s   $f2, $f2
/* A04074 80241834 C604001C */  lwc1      $f4, 0x1c($s0)
/* A04078 80241838 C6000014 */  lwc1      $f0, 0x14($s0)
/* A0407C 8024183C 8E050018 */  lw        $a1, 0x18($s0)
/* A04080 80241840 46002100 */  add.s     $f4, $f4, $f0
/* A04084 80241844 8E06000C */  lw        $a2, 0xc($s0)
/* A04088 80241848 C6200078 */  lwc1      $f0, 0x78($s1)
/* A0408C 8024184C 46800020 */  cvt.s.w   $f0, $f0
/* A04090 80241850 E604001C */  swc1      $f4, 0x1c($s0)
/* A04094 80241854 3C014059 */  lui       $at, 0x4059
/* A04098 80241858 44812800 */  mtc1      $at, $f5
/* A0409C 8024185C 44802000 */  mtc1      $zero, $f4
/* A040A0 80241860 46000021 */  cvt.d.s   $f0, $f0
/* A040A4 80241864 46240003 */  div.d     $f0, $f0, $f4
/* A040A8 80241868 46200520 */  cvt.s.d   $f20, $f0
/* A040AC 8024186C 46241083 */  div.d     $f2, $f2, $f4
/* A040B0 80241870 0C00EA95 */  jal       npc_move_heading
/* A040B4 80241874 462015A0 */   cvt.s.d  $f22, $f2
/* A040B8 80241878 C604001C */  lwc1      $f4, 0x1c($s0)
/* A040BC 8024187C 44801000 */  mtc1      $zero, $f2
/* A040C0 80241880 44801800 */  mtc1      $zero, $f3
/* A040C4 80241884 46002021 */  cvt.d.s   $f0, $f4
/* A040C8 80241888 4620103E */  c.le.d    $f2, $f0
/* A040CC 8024188C 00000000 */  nop       
/* A040D0 80241890 45000030 */  bc1f      .L80241954
/* A040D4 80241894 00000000 */   nop      
/* A040D8 80241898 C600003C */  lwc1      $f0, 0x3c($s0)
/* A040DC 8024189C 46040000 */  add.s     $f0, $f0, $f4
/* A040E0 802418A0 E600003C */  swc1      $f0, 0x3c($s0)
/* A040E4 802418A4 8E2200CC */  lw        $v0, 0xcc($s1)
/* A040E8 802418A8 8C420024 */  lw        $v0, 0x24($v0)
/* A040EC 802418AC AE020028 */  sw        $v0, 0x28($s0)
/* A040F0 802418B0 A2200007 */  sb        $zero, 7($s1)
/* A040F4 802418B4 8E020000 */  lw        $v0, ($s0)
/* A040F8 802418B8 30420008 */  andi      $v0, $v0, 8
/* A040FC 802418BC 14400011 */  bnez      $v0, .L80241904
/* A04100 802418C0 0000102D */   daddu    $v0, $zero, $zero
/* A04104 802418C4 27A50018 */  addiu     $a1, $sp, 0x18
/* A04108 802418C8 27A6001C */  addiu     $a2, $sp, 0x1c
/* A0410C 802418CC C6000038 */  lwc1      $f0, 0x38($s0)
/* A04110 802418D0 C602003C */  lwc1      $f2, 0x3c($s0)
/* A04114 802418D4 C6040040 */  lwc1      $f4, 0x40($s0)
/* A04118 802418D8 3C01447A */  lui       $at, 0x447a
/* A0411C 802418DC 44813000 */  mtc1      $at, $f6
/* A04120 802418E0 27A20024 */  addiu     $v0, $sp, 0x24
/* A04124 802418E4 E7A00018 */  swc1      $f0, 0x18($sp)
/* A04128 802418E8 E7A2001C */  swc1      $f2, 0x1c($sp)
/* A0412C 802418EC E7A40020 */  swc1      $f4, 0x20($sp)
/* A04130 802418F0 E7A60024 */  swc1      $f6, 0x24($sp)
/* A04134 802418F4 AFA20010 */  sw        $v0, 0x10($sp)
/* A04138 802418F8 8E040080 */  lw        $a0, 0x80($s0)
/* A0413C 802418FC 0C0372DF */  jal       func_800DCB7C
/* A04140 80241900 27A70020 */   addiu    $a3, $sp, 0x20
.L80241904:
/* A04144 80241904 1040000B */  beqz      $v0, .L80241934
/* A04148 80241908 00000000 */   nop      
/* A0414C 8024190C C7A0001C */  lwc1      $f0, 0x1c($sp)
/* A04150 80241910 46140080 */  add.s     $f2, $f0, $f20
/* A04154 80241914 C600003C */  lwc1      $f0, 0x3c($s0)
/* A04158 80241918 4600103E */  c.le.s    $f2, $f0
/* A0415C 8024191C 00000000 */  nop       
/* A04160 80241920 4500008D */  bc1f      .L80241B58
/* A04164 80241924 00000000 */   nop      
/* A04168 80241928 E602003C */  swc1      $f2, 0x3c($s0)
/* A0416C 8024192C 080906D6 */  j         .L80241B58
/* A04170 80241930 AE400070 */   sw       $zero, 0x70($s2)
.L80241934:
/* A04174 80241934 C602003C */  lwc1      $f2, 0x3c($s0)
/* A04178 80241938 C6000064 */  lwc1      $f0, 0x64($s0)
/* A0417C 8024193C 4602003E */  c.le.s    $f0, $f2
/* A04180 80241940 00000000 */  nop       
/* A04184 80241944 45030084 */  bc1tl     .L80241B58
/* A04188 80241948 AE400070 */   sw       $zero, 0x70($s2)
/* A0418C 8024194C 080906D6 */  j         .L80241B58
/* A04190 80241950 00000000 */   nop      
.L80241954:
/* A04194 80241954 4622003C */  c.lt.d    $f0, $f2
/* A04198 80241958 00000000 */  nop       
/* A0419C 8024195C 4500007E */  bc1f      .L80241B58
/* A041A0 80241960 00000000 */   nop      
/* A041A4 80241964 9602008E */  lhu       $v0, 0x8e($s0)
/* A041A8 80241968 24420001 */  addiu     $v0, $v0, 1
/* A041AC 8024196C A602008E */  sh        $v0, 0x8e($s0)
/* A041B0 80241970 00021400 */  sll       $v0, $v0, 0x10
/* A041B4 80241974 8E630020 */  lw        $v1, 0x20($s3)
/* A041B8 80241978 00021403 */  sra       $v0, $v0, 0x10
/* A041BC 8024197C 0043102A */  slt       $v0, $v0, $v1
/* A041C0 80241980 14400026 */  bnez      $v0, .L80241A1C
/* A041C4 80241984 00000000 */   nop      
/* A041C8 80241988 C60C0038 */  lwc1      $f12, 0x38($s0)
/* A041CC 8024198C C60E0040 */  lwc1      $f14, 0x40($s0)
/* A041D0 80241990 3C02800F */  lui       $v0, %hi(gPlayerStatusPtr)
/* A041D4 80241994 8C427B30 */  lw        $v0, %lo(gPlayerStatusPtr)($v0)
/* A041D8 80241998 A600008E */  sh        $zero, 0x8e($s0)
/* A041DC 8024199C 8C460028 */  lw        $a2, 0x28($v0)
/* A041E0 802419A0 0C00A720 */  jal       atan2
/* A041E4 802419A4 8C470030 */   lw       $a3, 0x30($v0)
/* A041E8 802419A8 46000506 */  mov.s     $f20, $f0
/* A041EC 802419AC C60C000C */  lwc1      $f12, 0xc($s0)
/* A041F0 802419B0 0C00A70A */  jal       get_clamped_angle_diff
/* A041F4 802419B4 4600A386 */   mov.s    $f14, $f20
/* A041F8 802419B8 46000086 */  mov.s     $f2, $f0
/* A041FC 802419BC 8E62001C */  lw        $v0, 0x1c($s3)
/* A04200 802419C0 46001005 */  abs.s     $f0, $f2
/* A04204 802419C4 44822000 */  mtc1      $v0, $f4
/* A04208 802419C8 00000000 */  nop       
/* A0420C 802419CC 46802120 */  cvt.s.w   $f4, $f4
/* A04210 802419D0 4600203C */  c.lt.s    $f4, $f0
/* A04214 802419D4 00000000 */  nop       
/* A04218 802419D8 4500000D */  bc1f      .L80241A10
/* A0421C 802419DC 00000000 */   nop      
/* A04220 802419E0 44800000 */  mtc1      $zero, $f0
/* A04224 802419E4 C614000C */  lwc1      $f20, 0xc($s0)
/* A04228 802419E8 4600103C */  c.lt.s    $f2, $f0
/* A0422C 802419EC 00000000 */  nop       
/* A04230 802419F0 45000006 */  bc1f      .L80241A0C
/* A04234 802419F4 00021023 */   negu     $v0, $v0
/* A04238 802419F8 44820000 */  mtc1      $v0, $f0
/* A0423C 802419FC 00000000 */  nop       
/* A04240 80241A00 46800020 */  cvt.s.w   $f0, $f0
/* A04244 80241A04 08090684 */  j         .L80241A10
/* A04248 80241A08 4600A500 */   add.s    $f20, $f20, $f0
.L80241A0C:
/* A0424C 80241A0C 4604A500 */  add.s     $f20, $f20, $f4
.L80241A10:
/* A04250 80241A10 0C00A6C9 */  jal       clamp_angle
/* A04254 80241A14 4600A306 */   mov.s    $f12, $f20
/* A04258 80241A18 E600000C */  swc1      $f0, 0xc($s0)
.L80241A1C:
/* A0425C 80241A1C 8E020000 */  lw        $v0, ($s0)
/* A04260 80241A20 30420008 */  andi      $v0, $v0, 8
/* A04264 80241A24 1040000A */  beqz      $v0, .L80241A50
/* A04268 80241A28 27A50018 */   addiu    $a1, $sp, 0x18
/* A0426C 80241A2C C602003C */  lwc1      $f2, 0x3c($s0)
/* A04270 80241A30 C600001C */  lwc1      $f0, 0x1c($s0)
/* A04274 80241A34 46001080 */  add.s     $f2, $f2, $f0
/* A04278 80241A38 4616103C */  c.lt.s    $f2, $f22
/* A0427C 80241A3C 00000000 */  nop       
/* A04280 80241A40 45020045 */  bc1fl     .L80241B58
/* A04284 80241A44 E602003C */   swc1     $f2, 0x3c($s0)
/* A04288 80241A48 080906D5 */  j         .L80241B54
/* A0428C 80241A4C E616003C */   swc1     $f22, 0x3c($s0)
.L80241A50:
/* A04290 80241A50 C6000038 */  lwc1      $f0, 0x38($s0)
/* A04294 80241A54 27A6001C */  addiu     $a2, $sp, 0x1c
/* A04298 80241A58 E7A00018 */  swc1      $f0, 0x18($sp)
/* A0429C 80241A5C 860200A8 */  lh        $v0, 0xa8($s0)
/* A042A0 80241A60 C600001C */  lwc1      $f0, 0x1c($s0)
/* A042A4 80241A64 C604003C */  lwc1      $f4, 0x3c($s0)
/* A042A8 80241A68 44821000 */  mtc1      $v0, $f2
/* A042AC 80241A6C 00000000 */  nop       
/* A042B0 80241A70 468010A0 */  cvt.s.w   $f2, $f2
/* A042B4 80241A74 46000005 */  abs.s     $f0, $f0
/* A042B8 80241A78 46020000 */  add.s     $f0, $f0, $f2
/* A042BC 80241A7C C6060040 */  lwc1      $f6, 0x40($s0)
/* A042C0 80241A80 27A20024 */  addiu     $v0, $sp, 0x24
/* A042C4 80241A84 46022100 */  add.s     $f4, $f4, $f2
/* A042C8 80241A88 3C014024 */  lui       $at, 0x4024
/* A042CC 80241A8C 44811800 */  mtc1      $at, $f3
/* A042D0 80241A90 44801000 */  mtc1      $zero, $f2
/* A042D4 80241A94 46000021 */  cvt.d.s   $f0, $f0
/* A042D8 80241A98 46220000 */  add.d     $f0, $f0, $f2
/* A042DC 80241A9C E7A60020 */  swc1      $f6, 0x20($sp)
/* A042E0 80241AA0 E7A4001C */  swc1      $f4, 0x1c($sp)
/* A042E4 80241AA4 46200020 */  cvt.s.d   $f0, $f0
/* A042E8 80241AA8 E7A00024 */  swc1      $f0, 0x24($sp)
/* A042EC 80241AAC AFA20010 */  sw        $v0, 0x10($sp)
/* A042F0 80241AB0 8E040080 */  lw        $a0, 0x80($s0)
/* A042F4 80241AB4 0C0372DF */  jal       func_800DCB7C
/* A042F8 80241AB8 27A70020 */   addiu    $a3, $sp, 0x20
/* A042FC 80241ABC 10400015 */  beqz      $v0, .L80241B14
/* A04300 80241AC0 00000000 */   nop      
/* A04304 80241AC4 860200A8 */  lh        $v0, 0xa8($s0)
/* A04308 80241AC8 C604001C */  lwc1      $f4, 0x1c($s0)
/* A0430C 80241ACC 44820000 */  mtc1      $v0, $f0
/* A04310 80241AD0 00000000 */  nop       
/* A04314 80241AD4 46800020 */  cvt.s.w   $f0, $f0
/* A04318 80241AD8 46002085 */  abs.s     $f2, $f4
/* A0431C 80241ADC 46020000 */  add.s     $f0, $f0, $f2
/* A04320 80241AE0 C7A20024 */  lwc1      $f2, 0x24($sp)
/* A04324 80241AE4 4600103E */  c.le.s    $f2, $f0
/* A04328 80241AE8 00000000 */  nop       
/* A0432C 80241AEC 45000005 */  bc1f      .L80241B04
/* A04330 80241AF0 00000000 */   nop      
/* A04334 80241AF4 C7A0001C */  lwc1      $f0, 0x1c($sp)
/* A04338 80241AF8 AE00001C */  sw        $zero, 0x1c($s0)
/* A0433C 80241AFC 080906D6 */  j         .L80241B58
/* A04340 80241B00 E600003C */   swc1     $f0, 0x3c($s0)
.L80241B04:
/* A04344 80241B04 C600003C */  lwc1      $f0, 0x3c($s0)
/* A04348 80241B08 46040000 */  add.s     $f0, $f0, $f4
/* A0434C 80241B0C 080906D6 */  j         .L80241B58
/* A04350 80241B10 E600003C */   swc1     $f0, 0x3c($s0)
.L80241B14:
/* A04354 80241B14 C606003C */  lwc1      $f6, 0x3c($s0)
/* A04358 80241B18 860200A8 */  lh        $v0, 0xa8($s0)
/* A0435C 80241B1C 46163081 */  sub.s     $f2, $f6, $f22
/* A04360 80241B20 44820000 */  mtc1      $v0, $f0
/* A04364 80241B24 00000000 */  nop       
/* A04368 80241B28 46800020 */  cvt.s.w   $f0, $f0
/* A0436C 80241B2C 46001080 */  add.s     $f2, $f2, $f0
/* A04370 80241B30 C604001C */  lwc1      $f4, 0x1c($s0)
/* A04374 80241B34 46002005 */  abs.s     $f0, $f4
/* A04378 80241B38 4602003C */  c.lt.s    $f0, $f2
/* A0437C 80241B3C 00000000 */  nop       
/* A04380 80241B40 45020005 */  bc1fl     .L80241B58
/* A04384 80241B44 AE00001C */   sw       $zero, 0x1c($s0)
/* A04388 80241B48 46043000 */  add.s     $f0, $f6, $f4
/* A0438C 80241B4C 080906D6 */  j         .L80241B58
/* A04390 80241B50 E600003C */   swc1     $f0, 0x3c($s0)
.L80241B54:
/* A04394 80241B54 AE00001C */  sw        $zero, 0x1c($s0)
.L80241B58:
/* A04398 80241B58 8FBF0038 */  lw        $ra, 0x38($sp)
/* A0439C 80241B5C 8FB30034 */  lw        $s3, 0x34($sp)
/* A043A0 80241B60 8FB20030 */  lw        $s2, 0x30($sp)
/* A043A4 80241B64 8FB1002C */  lw        $s1, 0x2c($sp)
/* A043A8 80241B68 8FB00028 */  lw        $s0, 0x28($sp)
/* A043AC 80241B6C D7B60048 */  ldc1      $f22, 0x48($sp)
/* A043B0 80241B70 D7B40040 */  ldc1      $f20, 0x40($sp)
/* A043B4 80241B74 03E00008 */  jr        $ra
/* A043B8 80241B78 27BD0050 */   addiu    $sp, $sp, 0x50
