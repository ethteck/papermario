.set noat      # allow manual use of $at
.set noreorder # don't insert nops after branches

glabel func_802406CC_C8617C
/* C8617C 802406CC 27BDFFD0 */  addiu     $sp, $sp, -0x30
/* C86180 802406D0 AFB40028 */  sw        $s4, 0x28($sp)
/* C86184 802406D4 0080A02D */  daddu     $s4, $a0, $zero
/* C86188 802406D8 AFBF002C */  sw        $ra, 0x2c($sp)
/* C8618C 802406DC AFB30024 */  sw        $s3, 0x24($sp)
/* C86190 802406E0 AFB20020 */  sw        $s2, 0x20($sp)
/* C86194 802406E4 AFB1001C */  sw        $s1, 0x1c($sp)
/* C86198 802406E8 AFB00018 */  sw        $s0, 0x18($sp)
/* C8619C 802406EC 8E910148 */  lw        $s1, 0x148($s4)
/* C861A0 802406F0 86240008 */  lh        $a0, 8($s1)
/* C861A4 802406F4 0C00EABB */  jal       get_npc_unsafe
/* C861A8 802406F8 00A0802D */   daddu    $s0, $a1, $zero
/* C861AC 802406FC 16000005 */  bnez      $s0, .L80240714
/* C861B0 80240700 0040902D */   daddu    $s2, $v0, $zero
/* C861B4 80240704 8E2200B0 */  lw        $v0, 0xb0($s1)
/* C861B8 80240708 30420004 */  andi      $v0, $v0, 4
/* C861BC 8024070C 10400015 */  beqz      $v0, .L80240764
/* C861C0 80240710 00000000 */   nop      
.L80240714:
/* C861C4 80240714 AE800070 */  sw        $zero, 0x70($s4)
/* C861C8 80240718 8E420000 */  lw        $v0, ($s2)
/* C861CC 8024071C 3C031F30 */  lui       $v1, 0x1f30
/* C861D0 80240720 A640008E */  sh        $zero, 0x8e($s2)
/* C861D4 80240724 34420102 */  ori       $v0, $v0, 0x102
/* C861D8 80240728 AE420000 */  sw        $v0, ($s2)
/* C861DC 8024072C 8E220000 */  lw        $v0, ($s1)
/* C861E0 80240730 3C01C47A */  lui       $at, 0xc47a
/* C861E4 80240734 44810000 */  mtc1      $at, $f0
/* C861E8 80240738 00431025 */  or        $v0, $v0, $v1
/* C861EC 8024073C AE220000 */  sw        $v0, ($s1)
/* C861F0 80240740 AE400038 */  sw        $zero, 0x38($s2)
/* C861F4 80240744 E640003C */  swc1      $f0, 0x3c($s2)
/* C861F8 80240748 AE400040 */  sw        $zero, 0x40($s2)
/* C861FC 8024074C 8E2300B0 */  lw        $v1, 0xb0($s1)
/* C86200 80240750 30620004 */  andi      $v0, $v1, 4
/* C86204 80240754 10400003 */  beqz      $v0, .L80240764
/* C86208 80240758 2402FFFB */   addiu    $v0, $zero, -5
/* C8620C 8024075C 00621024 */  and       $v0, $v1, $v0
/* C86210 80240760 AE2200B0 */  sw        $v0, 0xb0($s1)
.L80240764:
/* C86214 80240764 8E930070 */  lw        $s3, 0x70($s4)
/* C86218 80240768 12600005 */  beqz      $s3, .L80240780
/* C8621C 8024076C 24020001 */   addiu    $v0, $zero, 1
/* C86220 80240770 12620048 */  beq       $s3, $v0, .L80240894
/* C86224 80240774 00000000 */   nop      
/* C86228 80240778 08090242 */  j         .L80240908
/* C8622C 8024077C 00000000 */   nop      
.L80240780:
/* C86230 80240780 86240008 */  lh        $a0, 8($s1)
/* C86234 80240784 0C00FB3A */  jal       get_enemy
/* C86238 80240788 2484FFFF */   addiu    $a0, $a0, -1
/* C8623C 8024078C 0040802D */  daddu     $s0, $v0, $zero
/* C86240 80240790 0C00EABB */  jal       get_npc_unsafe
/* C86244 80240794 86040008 */   lh       $a0, 8($s0)
/* C86248 80240798 24030001 */  addiu     $v1, $zero, 1
/* C8624C 8024079C 0040982D */  daddu     $s3, $v0, $zero
/* C86250 802407A0 A2230007 */  sb        $v1, 7($s1)
/* C86254 802407A4 8E03006C */  lw        $v1, 0x6c($s0)
/* C86258 802407A8 24020003 */  addiu     $v0, $zero, 3
/* C8625C 802407AC 14620056 */  bne       $v1, $v0, .L80240908
/* C86260 802407B0 00000000 */   nop      
/* C86264 802407B4 8E2500A8 */  lw        $a1, 0xa8($s1)
/* C86268 802407B8 10A00003 */  beqz      $a1, .L802407C8
/* C8626C 802407BC 0260202D */   daddu    $a0, $s3, $zero
/* C86270 802407C0 0C012530 */  jal       func_800494C0
/* C86274 802407C4 0000302D */   daddu    $a2, $zero, $zero
.L802407C8:
/* C86278 802407C8 27A40010 */  addiu     $a0, $sp, 0x10
/* C8627C 802407CC C6280070 */  lwc1      $f8, 0x70($s1)
/* C86280 802407D0 46804220 */  cvt.s.w   $f8, $f8
/* C86284 802407D4 C6620034 */  lwc1      $f2, 0x34($s3)
/* C86288 802407D8 3C014387 */  lui       $at, 0x4387
/* C8628C 802407DC 44810000 */  mtc1      $at, $f0
/* C86290 802407E0 44064000 */  mfc1      $a2, $f8
/* C86294 802407E4 46020001 */  sub.s     $f0, $f0, $f2
/* C86298 802407E8 C6660038 */  lwc1      $f6, 0x38($s3)
/* C8629C 802407EC C6640040 */  lwc1      $f4, 0x40($s3)
/* C862A0 802407F0 44070000 */  mfc1      $a3, $f0
/* C862A4 802407F4 27A50014 */  addiu     $a1, $sp, 0x14
/* C862A8 802407F8 E7A60010 */  swc1      $f6, 0x10($sp)
/* C862AC 802407FC 0C00A7E7 */  jal       add_vec2D_polar
/* C862B0 80240800 E7A40014 */   swc1     $f4, 0x14($sp)
/* C862B4 80240804 C7A00010 */  lwc1      $f0, 0x10($sp)
/* C862B8 80240808 4600020D */  trunc.w.s $f8, $f0
/* C862BC 8024080C 44024000 */  mfc1      $v0, $f8
/* C862C0 80240810 E6400038 */  swc1      $f0, 0x38($s2)
/* C862C4 80240814 A6220010 */  sh        $v0, 0x10($s1)
/* C862C8 80240818 C660003C */  lwc1      $f0, 0x3c($s3)
/* C862CC 8024081C C622006C */  lwc1      $f2, 0x6c($s1)
/* C862D0 80240820 468010A0 */  cvt.s.w   $f2, $f2
/* C862D4 80240824 46020000 */  add.s     $f0, $f0, $f2
/* C862D8 80240828 3C03800F */  lui       $v1, %hi(gPlayerStatusPtr)
/* C862DC 8024082C 8C637B30 */  lw        $v1, %lo(gPlayerStatusPtr)($v1)
/* C862E0 80240830 E640003C */  swc1      $f0, 0x3c($s2)
/* C862E4 80240834 C7A20014 */  lwc1      $f2, 0x14($sp)
/* C862E8 80240838 4600020D */  trunc.w.s $f8, $f0
/* C862EC 8024083C 44024000 */  mfc1      $v0, $f8
/* C862F0 80240840 00000000 */  nop       
/* C862F4 80240844 A6220012 */  sh        $v0, 0x12($s1)
/* C862F8 80240848 4600120D */  trunc.w.s $f8, $f2
/* C862FC 8024084C 44024000 */  mfc1      $v0, $f8
/* C86300 80240850 E6420040 */  swc1      $f2, 0x40($s2)
/* C86304 80240854 A6220014 */  sh        $v0, 0x14($s1)
/* C86308 80240858 8C660028 */  lw        $a2, 0x28($v1)
/* C8630C 8024085C 8C670030 */  lw        $a3, 0x30($v1)
/* C86310 80240860 C64C0038 */  lwc1      $f12, 0x38($s2)
/* C86314 80240864 0C00A720 */  jal       atan2
/* C86318 80240868 C64E0040 */   lwc1     $f14, 0x40($s2)
/* C8631C 8024086C 3C03E0EF */  lui       $v1, 0xe0ef
/* C86320 80240870 E640000C */  swc1      $f0, 0xc($s2)
/* C86324 80240874 8E220000 */  lw        $v0, ($s1)
/* C86328 80240878 3463FFFF */  ori       $v1, $v1, 0xffff
/* C8632C 8024087C 00431024 */  and       $v0, $v0, $v1
/* C86330 80240880 AE220000 */  sw        $v0, ($s1)
/* C86334 80240884 24020001 */  addiu     $v0, $zero, 1
/* C86338 80240888 A640008E */  sh        $zero, 0x8e($s2)
/* C8633C 8024088C 08090242 */  j         .L80240908
/* C86340 80240890 AE820070 */   sw       $v0, 0x70($s4)
.L80240894:
/* C86344 80240894 86240008 */  lh        $a0, 8($s1)
/* C86348 80240898 0C00FB3A */  jal       get_enemy
/* C8634C 8024089C 2484FFFF */   addiu    $a0, $a0, -1
/* C86350 802408A0 0040802D */  daddu     $s0, $v0, $zero
/* C86354 802408A4 0C00EABB */  jal       get_npc_unsafe
/* C86358 802408A8 86040008 */   lh       $a0, 8($s0)
/* C8635C 802408AC 9642008E */  lhu       $v0, 0x8e($s2)
/* C86360 802408B0 24420001 */  addiu     $v0, $v0, 1
/* C86364 802408B4 A642008E */  sh        $v0, 0x8e($s2)
/* C86368 802408B8 00021400 */  sll       $v0, $v0, 0x10
/* C8636C 802408BC 8E23007C */  lw        $v1, 0x7c($s1)
/* C86370 802408C0 00021403 */  sra       $v0, $v0, 0x10
/* C86374 802408C4 0043102A */  slt       $v0, $v0, $v1
/* C86378 802408C8 50400001 */  beql      $v0, $zero, .L802408D0
/* C8637C 802408CC A2200007 */   sb       $zero, 7($s1)
.L802408D0:
/* C86380 802408D0 8E03006C */  lw        $v1, 0x6c($s0)
/* C86384 802408D4 24020004 */  addiu     $v0, $zero, 4
/* C86388 802408D8 1462000B */  bne       $v1, $v0, .L80240908
/* C8638C 802408DC 3C021F10 */   lui      $v0, 0x1f10
/* C86390 802408E0 8E230000 */  lw        $v1, ($s1)
/* C86394 802408E4 3C01C47A */  lui       $at, 0xc47a
/* C86398 802408E8 44810000 */  mtc1      $at, $f0
/* C8639C 802408EC 00621825 */  or        $v1, $v1, $v0
/* C863A0 802408F0 AE230000 */  sw        $v1, ($s1)
/* C863A4 802408F4 AE400038 */  sw        $zero, 0x38($s2)
/* C863A8 802408F8 E640003C */  swc1      $f0, 0x3c($s2)
/* C863AC 802408FC AE400040 */  sw        $zero, 0x40($s2)
/* C863B0 80240900 A2330007 */  sb        $s3, 7($s1)
/* C863B4 80240904 AE800070 */  sw        $zero, 0x70($s4)
.L80240908:
/* C863B8 80240908 8FBF002C */  lw        $ra, 0x2c($sp)
/* C863BC 8024090C 8FB40028 */  lw        $s4, 0x28($sp)
/* C863C0 80240910 8FB30024 */  lw        $s3, 0x24($sp)
/* C863C4 80240914 8FB20020 */  lw        $s2, 0x20($sp)
/* C863C8 80240918 8FB1001C */  lw        $s1, 0x1c($sp)
/* C863CC 8024091C 8FB00018 */  lw        $s0, 0x18($sp)
/* C863D0 80240920 0000102D */  daddu     $v0, $zero, $zero
/* C863D4 80240924 03E00008 */  jr        $ra
/* C863D8 80240928 27BD0030 */   addiu    $sp, $sp, 0x30
