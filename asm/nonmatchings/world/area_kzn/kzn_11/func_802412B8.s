.set noat      # allow manual use of $at
.set noreorder # don't insert nops after branches

glabel func_802412B8
/* C81458 802412B8 27BDFFB0 */  addiu     $sp, $sp, -0x50
/* C8145C 802412BC AFB20030 */  sw        $s2, 0x30($sp)
/* C81460 802412C0 0080902D */  daddu     $s2, $a0, $zero
/* C81464 802412C4 AFBF0038 */  sw        $ra, 0x38($sp)
/* C81468 802412C8 AFB30034 */  sw        $s3, 0x34($sp)
/* C8146C 802412CC AFB1002C */  sw        $s1, 0x2c($sp)
/* C81470 802412D0 AFB00028 */  sw        $s0, 0x28($sp)
/* C81474 802412D4 F7B60048 */  sdc1      $f22, 0x48($sp)
/* C81478 802412D8 F7B40040 */  sdc1      $f20, 0x40($sp)
/* C8147C 802412DC 8E510148 */  lw        $s1, 0x148($s2)
/* C81480 802412E0 86240008 */  lh        $a0, 8($s1)
/* C81484 802412E4 0C00EABB */  jal       get_npc_unsafe
/* C81488 802412E8 00A0982D */   daddu    $s3, $a1, $zero
/* C8148C 802412EC 0040802D */  daddu     $s0, $v0, $zero
/* C81490 802412F0 0200202D */  daddu     $a0, $s0, $zero
/* C81494 802412F4 C6220088 */  lwc1      $f2, 0x88($s1)
/* C81498 802412F8 468010A0 */  cvt.s.w   $f2, $f2
/* C8149C 802412FC 460010A1 */  cvt.d.s   $f2, $f2
/* C814A0 80241300 C604001C */  lwc1      $f4, 0x1c($s0)
/* C814A4 80241304 C6000014 */  lwc1      $f0, 0x14($s0)
/* C814A8 80241308 8E050018 */  lw        $a1, 0x18($s0)
/* C814AC 8024130C 46002100 */  add.s     $f4, $f4, $f0
/* C814B0 80241310 8E06000C */  lw        $a2, 0xc($s0)
/* C814B4 80241314 C6200078 */  lwc1      $f0, 0x78($s1)
/* C814B8 80241318 46800020 */  cvt.s.w   $f0, $f0
/* C814BC 8024131C E604001C */  swc1      $f4, 0x1c($s0)
/* C814C0 80241320 3C014059 */  lui       $at, 0x4059
/* C814C4 80241324 44812800 */  mtc1      $at, $f5
/* C814C8 80241328 44802000 */  mtc1      $zero, $f4
/* C814CC 8024132C 46000021 */  cvt.d.s   $f0, $f0
/* C814D0 80241330 46240003 */  div.d     $f0, $f0, $f4
/* C814D4 80241334 46200520 */  cvt.s.d   $f20, $f0
/* C814D8 80241338 46241083 */  div.d     $f2, $f2, $f4
/* C814DC 8024133C 0C00EA95 */  jal       npc_move_heading
/* C814E0 80241340 462015A0 */   cvt.s.d  $f22, $f2
/* C814E4 80241344 C604001C */  lwc1      $f4, 0x1c($s0)
/* C814E8 80241348 44801000 */  mtc1      $zero, $f2
/* C814EC 8024134C 44801800 */  mtc1      $zero, $f3
/* C814F0 80241350 46002021 */  cvt.d.s   $f0, $f4
/* C814F4 80241354 4620103E */  c.le.d    $f2, $f0
/* C814F8 80241358 00000000 */  nop       
/* C814FC 8024135C 45000030 */  bc1f      .L80241420
/* C81500 80241360 00000000 */   nop      
/* C81504 80241364 C600003C */  lwc1      $f0, 0x3c($s0)
/* C81508 80241368 46040000 */  add.s     $f0, $f0, $f4
/* C8150C 8024136C E600003C */  swc1      $f0, 0x3c($s0)
/* C81510 80241370 8E2200CC */  lw        $v0, 0xcc($s1)
/* C81514 80241374 8C420024 */  lw        $v0, 0x24($v0)
/* C81518 80241378 AE020028 */  sw        $v0, 0x28($s0)
/* C8151C 8024137C A2200007 */  sb        $zero, 7($s1)
/* C81520 80241380 8E020000 */  lw        $v0, ($s0)
/* C81524 80241384 30420008 */  andi      $v0, $v0, 8
/* C81528 80241388 14400011 */  bnez      $v0, .L802413D0
/* C8152C 8024138C 0000102D */   daddu    $v0, $zero, $zero
/* C81530 80241390 27A50018 */  addiu     $a1, $sp, 0x18
/* C81534 80241394 27A6001C */  addiu     $a2, $sp, 0x1c
/* C81538 80241398 C6000038 */  lwc1      $f0, 0x38($s0)
/* C8153C 8024139C C602003C */  lwc1      $f2, 0x3c($s0)
/* C81540 802413A0 C6040040 */  lwc1      $f4, 0x40($s0)
/* C81544 802413A4 3C01447A */  lui       $at, 0x447a
/* C81548 802413A8 44813000 */  mtc1      $at, $f6
/* C8154C 802413AC 27A20024 */  addiu     $v0, $sp, 0x24
/* C81550 802413B0 E7A00018 */  swc1      $f0, 0x18($sp)
/* C81554 802413B4 E7A2001C */  swc1      $f2, 0x1c($sp)
/* C81558 802413B8 E7A40020 */  swc1      $f4, 0x20($sp)
/* C8155C 802413BC E7A60024 */  swc1      $f6, 0x24($sp)
/* C81560 802413C0 AFA20010 */  sw        $v0, 0x10($sp)
/* C81564 802413C4 8E040080 */  lw        $a0, 0x80($s0)
/* C81568 802413C8 0C0372DF */  jal       func_800DCB7C
/* C8156C 802413CC 27A70020 */   addiu    $a3, $sp, 0x20
.L802413D0:
/* C81570 802413D0 1040000B */  beqz      $v0, .L80241400
/* C81574 802413D4 00000000 */   nop      
/* C81578 802413D8 C7A0001C */  lwc1      $f0, 0x1c($sp)
/* C8157C 802413DC 46140080 */  add.s     $f2, $f0, $f20
/* C81580 802413E0 C600003C */  lwc1      $f0, 0x3c($s0)
/* C81584 802413E4 4600103E */  c.le.s    $f2, $f0
/* C81588 802413E8 00000000 */  nop       
/* C8158C 802413EC 4500008D */  bc1f      .L80241624
/* C81590 802413F0 00000000 */   nop      
/* C81594 802413F4 E602003C */  swc1      $f2, 0x3c($s0)
/* C81598 802413F8 08090589 */  j         .L80241624
/* C8159C 802413FC AE400070 */   sw       $zero, 0x70($s2)
.L80241400:
/* C815A0 80241400 C602003C */  lwc1      $f2, 0x3c($s0)
/* C815A4 80241404 C6000064 */  lwc1      $f0, 0x64($s0)
/* C815A8 80241408 4602003E */  c.le.s    $f0, $f2
/* C815AC 8024140C 00000000 */  nop       
/* C815B0 80241410 45030084 */  bc1tl     .L80241624
/* C815B4 80241414 AE400070 */   sw       $zero, 0x70($s2)
/* C815B8 80241418 08090589 */  j         .L80241624
/* C815BC 8024141C 00000000 */   nop      
.L80241420:
/* C815C0 80241420 4622003C */  c.lt.d    $f0, $f2
/* C815C4 80241424 00000000 */  nop       
/* C815C8 80241428 4500007E */  bc1f      .L80241624
/* C815CC 8024142C 00000000 */   nop      
/* C815D0 80241430 9602008E */  lhu       $v0, 0x8e($s0)
/* C815D4 80241434 24420001 */  addiu     $v0, $v0, 1
/* C815D8 80241438 A602008E */  sh        $v0, 0x8e($s0)
/* C815DC 8024143C 00021400 */  sll       $v0, $v0, 0x10
/* C815E0 80241440 8E630020 */  lw        $v1, 0x20($s3)
/* C815E4 80241444 00021403 */  sra       $v0, $v0, 0x10
/* C815E8 80241448 0043102A */  slt       $v0, $v0, $v1
/* C815EC 8024144C 14400026 */  bnez      $v0, .L802414E8
/* C815F0 80241450 00000000 */   nop      
/* C815F4 80241454 C60C0038 */  lwc1      $f12, 0x38($s0)
/* C815F8 80241458 C60E0040 */  lwc1      $f14, 0x40($s0)
/* C815FC 8024145C 3C02800F */  lui       $v0, %hi(gPlayerStatusPtr)
/* C81600 80241460 8C427B30 */  lw        $v0, %lo(gPlayerStatusPtr)($v0)
/* C81604 80241464 A600008E */  sh        $zero, 0x8e($s0)
/* C81608 80241468 8C460028 */  lw        $a2, 0x28($v0)
/* C8160C 8024146C 0C00A720 */  jal       atan2
/* C81610 80241470 8C470030 */   lw       $a3, 0x30($v0)
/* C81614 80241474 46000506 */  mov.s     $f20, $f0
/* C81618 80241478 C60C000C */  lwc1      $f12, 0xc($s0)
/* C8161C 8024147C 0C00A70A */  jal       get_clamped_angle_diff
/* C81620 80241480 4600A386 */   mov.s    $f14, $f20
/* C81624 80241484 46000086 */  mov.s     $f2, $f0
/* C81628 80241488 8E62001C */  lw        $v0, 0x1c($s3)
/* C8162C 8024148C 46001005 */  abs.s     $f0, $f2
/* C81630 80241490 44822000 */  mtc1      $v0, $f4
/* C81634 80241494 00000000 */  nop       
/* C81638 80241498 46802120 */  cvt.s.w   $f4, $f4
/* C8163C 8024149C 4600203C */  c.lt.s    $f4, $f0
/* C81640 802414A0 00000000 */  nop       
/* C81644 802414A4 4500000D */  bc1f      .L802414DC
/* C81648 802414A8 00000000 */   nop      
/* C8164C 802414AC 44800000 */  mtc1      $zero, $f0
/* C81650 802414B0 C614000C */  lwc1      $f20, 0xc($s0)
/* C81654 802414B4 4600103C */  c.lt.s    $f2, $f0
/* C81658 802414B8 00000000 */  nop       
/* C8165C 802414BC 45000006 */  bc1f      .L802414D8
/* C81660 802414C0 00021023 */   negu     $v0, $v0
/* C81664 802414C4 44820000 */  mtc1      $v0, $f0
/* C81668 802414C8 00000000 */  nop       
/* C8166C 802414CC 46800020 */  cvt.s.w   $f0, $f0
/* C81670 802414D0 08090537 */  j         .L802414DC
/* C81674 802414D4 4600A500 */   add.s    $f20, $f20, $f0
.L802414D8:
/* C81678 802414D8 4604A500 */  add.s     $f20, $f20, $f4
.L802414DC:
/* C8167C 802414DC 0C00A6C9 */  jal       clamp_angle
/* C81680 802414E0 4600A306 */   mov.s    $f12, $f20
/* C81684 802414E4 E600000C */  swc1      $f0, 0xc($s0)
.L802414E8:
/* C81688 802414E8 8E020000 */  lw        $v0, ($s0)
/* C8168C 802414EC 30420008 */  andi      $v0, $v0, 8
/* C81690 802414F0 1040000A */  beqz      $v0, .L8024151C
/* C81694 802414F4 27A50018 */   addiu    $a1, $sp, 0x18
/* C81698 802414F8 C602003C */  lwc1      $f2, 0x3c($s0)
/* C8169C 802414FC C600001C */  lwc1      $f0, 0x1c($s0)
/* C816A0 80241500 46001080 */  add.s     $f2, $f2, $f0
/* C816A4 80241504 4616103C */  c.lt.s    $f2, $f22
/* C816A8 80241508 00000000 */  nop       
/* C816AC 8024150C 45020045 */  bc1fl     .L80241624
/* C816B0 80241510 E602003C */   swc1     $f2, 0x3c($s0)
/* C816B4 80241514 08090588 */  j         .L80241620
/* C816B8 80241518 E616003C */   swc1     $f22, 0x3c($s0)
.L8024151C:
/* C816BC 8024151C C6000038 */  lwc1      $f0, 0x38($s0)
/* C816C0 80241520 27A6001C */  addiu     $a2, $sp, 0x1c
/* C816C4 80241524 E7A00018 */  swc1      $f0, 0x18($sp)
/* C816C8 80241528 860200A8 */  lh        $v0, 0xa8($s0)
/* C816CC 8024152C C600001C */  lwc1      $f0, 0x1c($s0)
/* C816D0 80241530 C604003C */  lwc1      $f4, 0x3c($s0)
/* C816D4 80241534 44821000 */  mtc1      $v0, $f2
/* C816D8 80241538 00000000 */  nop       
/* C816DC 8024153C 468010A0 */  cvt.s.w   $f2, $f2
/* C816E0 80241540 46000005 */  abs.s     $f0, $f0
/* C816E4 80241544 46020000 */  add.s     $f0, $f0, $f2
/* C816E8 80241548 C6060040 */  lwc1      $f6, 0x40($s0)
/* C816EC 8024154C 27A20024 */  addiu     $v0, $sp, 0x24
/* C816F0 80241550 46022100 */  add.s     $f4, $f4, $f2
/* C816F4 80241554 3C014024 */  lui       $at, 0x4024
/* C816F8 80241558 44811800 */  mtc1      $at, $f3
/* C816FC 8024155C 44801000 */  mtc1      $zero, $f2
/* C81700 80241560 46000021 */  cvt.d.s   $f0, $f0
/* C81704 80241564 46220000 */  add.d     $f0, $f0, $f2
/* C81708 80241568 E7A60020 */  swc1      $f6, 0x20($sp)
/* C8170C 8024156C E7A4001C */  swc1      $f4, 0x1c($sp)
/* C81710 80241570 46200020 */  cvt.s.d   $f0, $f0
/* C81714 80241574 E7A00024 */  swc1      $f0, 0x24($sp)
/* C81718 80241578 AFA20010 */  sw        $v0, 0x10($sp)
/* C8171C 8024157C 8E040080 */  lw        $a0, 0x80($s0)
/* C81720 80241580 0C0372DF */  jal       func_800DCB7C
/* C81724 80241584 27A70020 */   addiu    $a3, $sp, 0x20
/* C81728 80241588 10400015 */  beqz      $v0, .L802415E0
/* C8172C 8024158C 00000000 */   nop      
/* C81730 80241590 860200A8 */  lh        $v0, 0xa8($s0)
/* C81734 80241594 C604001C */  lwc1      $f4, 0x1c($s0)
/* C81738 80241598 44820000 */  mtc1      $v0, $f0
/* C8173C 8024159C 00000000 */  nop       
/* C81740 802415A0 46800020 */  cvt.s.w   $f0, $f0
/* C81744 802415A4 46002085 */  abs.s     $f2, $f4
/* C81748 802415A8 46020000 */  add.s     $f0, $f0, $f2
/* C8174C 802415AC C7A20024 */  lwc1      $f2, 0x24($sp)
/* C81750 802415B0 4600103E */  c.le.s    $f2, $f0
/* C81754 802415B4 00000000 */  nop       
/* C81758 802415B8 45000005 */  bc1f      .L802415D0
/* C8175C 802415BC 00000000 */   nop      
/* C81760 802415C0 C7A0001C */  lwc1      $f0, 0x1c($sp)
/* C81764 802415C4 AE00001C */  sw        $zero, 0x1c($s0)
/* C81768 802415C8 08090589 */  j         .L80241624
/* C8176C 802415CC E600003C */   swc1     $f0, 0x3c($s0)
.L802415D0:
/* C81770 802415D0 C600003C */  lwc1      $f0, 0x3c($s0)
/* C81774 802415D4 46040000 */  add.s     $f0, $f0, $f4
/* C81778 802415D8 08090589 */  j         .L80241624
/* C8177C 802415DC E600003C */   swc1     $f0, 0x3c($s0)
.L802415E0:
/* C81780 802415E0 C606003C */  lwc1      $f6, 0x3c($s0)
/* C81784 802415E4 860200A8 */  lh        $v0, 0xa8($s0)
/* C81788 802415E8 46163081 */  sub.s     $f2, $f6, $f22
/* C8178C 802415EC 44820000 */  mtc1      $v0, $f0
/* C81790 802415F0 00000000 */  nop       
/* C81794 802415F4 46800020 */  cvt.s.w   $f0, $f0
/* C81798 802415F8 46001080 */  add.s     $f2, $f2, $f0
/* C8179C 802415FC C604001C */  lwc1      $f4, 0x1c($s0)
/* C817A0 80241600 46002005 */  abs.s     $f0, $f4
/* C817A4 80241604 4602003C */  c.lt.s    $f0, $f2
/* C817A8 80241608 00000000 */  nop       
/* C817AC 8024160C 45020005 */  bc1fl     .L80241624
/* C817B0 80241610 AE00001C */   sw       $zero, 0x1c($s0)
/* C817B4 80241614 46043000 */  add.s     $f0, $f6, $f4
/* C817B8 80241618 08090589 */  j         .L80241624
/* C817BC 8024161C E600003C */   swc1     $f0, 0x3c($s0)
.L80241620:
/* C817C0 80241620 AE00001C */  sw        $zero, 0x1c($s0)
.L80241624:
/* C817C4 80241624 8FBF0038 */  lw        $ra, 0x38($sp)
/* C817C8 80241628 8FB30034 */  lw        $s3, 0x34($sp)
/* C817CC 8024162C 8FB20030 */  lw        $s2, 0x30($sp)
/* C817D0 80241630 8FB1002C */  lw        $s1, 0x2c($sp)
/* C817D4 80241634 8FB00028 */  lw        $s0, 0x28($sp)
/* C817D8 80241638 D7B60048 */  ldc1      $f22, 0x48($sp)
/* C817DC 8024163C D7B40040 */  ldc1      $f20, 0x40($sp)
/* C817E0 80241640 03E00008 */  jr        $ra
/* C817E4 80241644 27BD0050 */   addiu    $sp, $sp, 0x50
